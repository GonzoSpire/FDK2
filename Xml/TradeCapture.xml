<protocol name="TradeCapture" majorVer="6" minorVer="2">
    <members>
        <message name="LoginRequest" id="0" size="48">
            <fields>
                <field name="Username" offset="8" type="ustring" optional="N" repeatable="N"/>
                <field name="Password" offset="16" type="ustring" optional="N" repeatable="N"/>
                <field name="DeviceId" offset="24" type="string" optional="N" repeatable="N"/>
                <field name="AppId" offset="32" type="string" optional="N" repeatable="N"/>
                <field name="SessionId" offset="40" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="LoginReport" id="1" size="9">
            <fields>
                <field name="TwoFactorLogin" offset="8" type="bool" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="LoginRejectReason" size="4">
            <members>
                <member name="IncorrectCredentials" value="0"/>
                <member name="ThrottlingLimits" value="1"/>
                <member name="BlockedLogin" value="2"/>
                <member name="InternalServerError" value="3"/>
                <member name="Other" value="4"/>
            </members>
        </enum>
        <message name="LoginReject" id="2" size="20">
            <fields>
                <field name="Reason" offset="8" type="LoginRejectReason" optional="N" repeatable="N"/>
                <field name="Text" offset="12" type="ustring" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <enum name="LogoutReason" size="4">
            <members>
                <member name="ClientLogout" value="0"/>
                <member name="ServerLogout" value="1"/>
                <member name="DeletedLogin" value="2"/>
                <member name="BlockedLogin" value="3"/>
                <member name="InternalServerError" value="4"/>
                <member name="Other" value="5"/>
            </members>
        </enum>
        <message name="Logout" id="3" size="20">
            <fields>
                <field name="Reason" offset="8" type="LogoutReason" optional="N" repeatable="N"/>
                <field name="Text" offset="12" type="ustring" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <enum name="TwoFactorReason" size="4">
            <members>
                <member name="ServerRequest" value="0"/>
                <member name="ServerSuccess" value="1"/>
                <member name="ServerError" value="2"/>
                <member name="ServerResume" value="3"/>
                <member name="ClientResponse" value="4"/>
                <member name="ClientResume" value="5"/>
            </members>
        </enum>
        <message name="TwoFactorLogin" id="4" size="36">
            <fields>
                <field name="Reason" offset="8" type="TwoFactorReason" optional="N" repeatable="N"/>
                <field name="OneTimePassword" offset="12" type="ustring" optional="Y" repeatable="N"/>
                <field name="ExpireTime" offset="20" type="timestamp" optional="Y" repeatable="N"/>
                <field name="Text" offset="28" type="ustring" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <message name="TwoFactorReject" id="5" size="16">
            <fields>
                <field name="Text" offset="8" type="ustring" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <message name="Request" id="6" size="16">
            <subMessages>
                <subMessage name="TradeCaptureRequest_1"/>
                <subMessage name="TradeDownloadRequest"/>
                <subMessage name="TradeDownloadCancelRequest"/>
                <subMessage name="AccountDownloadRequest"/>
                <subMessage name="AccountDownloadCancelRequest"/>
                <subMessage name="TradeSubscribeRequest"/>
                <subMessage name="TradeUnsubscribeRequest"/>
            </subMessages>
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="Response" id="7" size="16">
            <subMessages>
                <subMessage name="Reject"/>
                <subMessage name="TradeCaptureReport_1"/>
                <subMessage name="TradeDownloadBeginReport"/>
                <subMessage name="TradeDownloadReport"/>
                <subMessage name="TradeDownloadEndReport"/>
                <subMessage name="TradeDownloadCancelReport"/>
                <subMessage name="AccountDownloadBeginReport"/>
                <subMessage name="AccountDownloadReport"/>
                <subMessage name="AccountDownloadEndReport"/>
                <subMessage name="AccountDownloadCancelReport"/>
                <subMessage name="TradeSubscribeReport"/>
                <subMessage name="TradeUnsubscribeReport"/>
            </subMessages>
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="RejectReason" size="4">
            <members>
                <member name="ThrottlingLimits" value="0"/>
                <member name="RequestCancelled" value="1"/>
                <member name="InternalServerError" value="2"/>
                <member name="Other" value="3"/>
            </members>
        </enum>
        <message name="Reject" id="8" superMessage="Response" size="28">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Reason" offset="16" type="RejectReason" optional="N" repeatable="N"/>
                <field name="Text" offset="20" type="ustring" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <enum name="TradeCaptureRequestType_1" size="4">
            <members>
                <member name="Subscribe" value="0"/>
                <member name="Unsubscribe" value="1"/>
            </members>
        </enum>
        <message name="TradeCaptureRequest_1" id="9" superMessage="Request" size="21">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Type" offset="16" type="TradeCaptureRequestType_1" optional="N" repeatable="N"/>
                <field name="SkipCancel" offset="20" type="bool" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="TradeType" size="4">
            <members>
                <member name="OrderFilled" value="0"/>
                <member name="PositionClosed" value="1"/>
                <member name="OrderCancelled" value="2"/>
                <member name="OrderExpired" value="3"/>
                <member name="OrderActivated" value="4"/>
                <member name="Balance" value="5"/>
            </members>
        </enum>
        <enum name="TradeReason" size="4">
            <members>
                <member name="ClientRequest" value="0"/>
                <member name="OrderActivated" value="1"/>
                <member name="TakeProfitActivated" value="2"/>
                <member name="StopLossActivated" value="3"/>
                <member name="OrderExpired" value="4"/>
                <member name="Dealer" value="5"/>
                <member name="StopOut" value="6"/>
                <member name="Rollover" value="7"/>
                <member name="AccountDeleted" value="8"/>
            </members>
        </enum>
        <enum name="OrderSide" size="4">
            <members>
                <member name="Buy" value="0"/>
                <member name="Sell" value="1"/>
            </members>
        </enum>
        <enum name="OrderType" size="4">
            <members>
                <member name="Market" value="0"/>
                <member name="Limit" value="1"/>
                <member name="Stop" value="2"/>
                <member name="StopLimit" value="3"/>
                <member name="Position" value="4"/>
            </members>
        </enum>
        <enum name="OrderTimeInForce" size="4">
            <members>
                <member name="GoodTillCancel" value="0"/>
                <member name="GoodTillDate" value="1"/>
                <member name="ImmediateOrCancel" value="2"/>
            </members>
        </enum>
        <set name="OrderFlags" size="4">
            <members>
                <member name="Slippage" value="0"/>
            </members>
        </set>
        <set name="CommissionFlags" size="4">
            <members>
                <member name="OpenReduced" value="0"/>
                <member name="CloseReduced" value="1"/>
            </members>
        </set>
        <enum name="PosType" size="4">
            <members>
                <member name="Long" value="0"/>
                <member name="Short" value="1"/>
            </members>
        </enum>
        <group name="Position" size="20">
            <fields>
                <field name="Type" offset="0" type="PosType" optional="N" repeatable="N"/>
                <field name="Qty" offset="4" type="double" optional="N" repeatable="N"/>
                <field name="Price" offset="12" type="double" optional="N" repeatable="N"/>
            </fields>
        </group>
        <group name="Balance" size="24">
            <fields>
                <field name="CurrId" offset="0" type="string" optional="N" repeatable="N"/>
                <field name="Move" offset="8" type="double" optional="N" repeatable="N"/>
                <field name="Total" offset="16" type="double" optional="N" repeatable="N"/>
            </fields>
        </group>
        <group name="Asset" size="24">
            <fields>
                <field name="CurrId" offset="0" type="string" optional="N" repeatable="N"/>
                <field name="Move" offset="8" type="double" optional="N" repeatable="N"/>
                <field name="Total" offset="16" type="double" optional="N" repeatable="N"/>
            </fields>
        </group>
        <enum name="ConversionType" size="4">
            <members>
                <member name="MarginToBalance" value="0"/>
                <member name="MarginToUsd" value="1"/>
                <member name="ProfitToBalance" value="2"/>
                <member name="ProfitToUsd" value="3"/>
                <member name="BalanceToUsd" value="4"/>
                <member name="Asset1ToUsd" value="5"/>
                <member name="Asset2ToUsd" value="6"/>
                <member name="MinCommissionToBalance" value="7"/>
                <member name="UsdToMargin" value="8"/>
                <member name="UsdToProfit" value="9"/>
                <member name="UsdToBalance" value="10"/>
                <member name="UsdToAsset1" value="11"/>
                <member name="UsdToAsset2" value="12"/>
            </members>
        </enum>
        <group name="Conversion" size="12">
            <fields>
                <field name="Type" offset="0" type="ConversionType" optional="N" repeatable="N"/>
                <field name="Rate" offset="4" type="double" optional="N" repeatable="N"/>
            </fields>
        </group>
        <group name="Trade" size="464">
            <fields>
                <field name="Id" offset="0" type="string" optional="N" repeatable="N"/>
                <field name="Type" offset="8" type="TradeType" optional="N" repeatable="N"/>
                <field name="Reason" offset="12" type="TradeReason" optional="N" repeatable="N"/>
                <field name="TransactTime" offset="16" type="timestamp" optional="N" repeatable="N"/>
                <field name="OrderId" offset="24" type="int64" optional="Y" repeatable="N"/>
                <field name="ActionId" offset="32" type="int32" optional="Y" repeatable="N"/>
                <field name="ClOrdId" offset="36" type="string" optional="Y" repeatable="N"/>
                <field name="OrderType" offset="44" type="OrderType" optional="Y" repeatable="N"/>
                <field name="SymbolId" offset="48" type="string" optional="Y" repeatable="N"/>
                <field name="Precision" offset="56" type="int32" optional="Y" repeatable="N"/>
                <field name="MarginCurrId" offset="60" type="string" optional="Y" repeatable="N"/>
                <field name="ProfitCurrId" offset="68" type="string" optional="Y" repeatable="N"/>
                <field name="OrderSide" offset="76" type="OrderSide" optional="Y" repeatable="N"/>
                <field name="Qty" offset="80" type="double" optional="Y" repeatable="N"/>
                <field name="MaxVisibleQty" offset="88" type="double" optional="Y" repeatable="N"/>
                <field name="Price" offset="96" type="double" optional="Y" repeatable="N"/>
                <field name="StopPrice" offset="104" type="double" optional="Y" repeatable="N"/>
                <field name="TimeInForce" offset="112" type="OrderTimeInForce" optional="Y" repeatable="N"/>
                <field name="ExpireTime" offset="116" type="timestamp" optional="Y" repeatable="N"/>
                <field name="StopLoss" offset="124" type="double" optional="Y" repeatable="N"/>
                <field name="TakeProfit" offset="132" type="double" optional="Y" repeatable="N"/>
                <field name="OrderFlags" offset="140" type="OrderFlags" optional="N" repeatable="N"/>
                <field name="ParentOrderType" offset="144" type="OrderType" optional="Y" repeatable="N"/>
                <field name="Comment" offset="148" type="ustring" optional="Y" repeatable="N"/>
                <field name="Tag" offset="156" type="ustring" optional="Y" repeatable="N"/>
                <field name="Magic" offset="164" type="int32" optional="Y" repeatable="N"/>
                <field name="LastQty" offset="168" type="double" optional="Y" repeatable="N"/>
                <field name="LastPrice" offset="176" type="double" optional="Y" repeatable="N"/>
                <field name="LeavesQty" offset="184" type="double" optional="Y" repeatable="N"/>
                <field name="Created" offset="192" type="timestamp" optional="Y" repeatable="N"/>
                <field name="Modified" offset="200" type="timestamp" optional="Y" repeatable="N"/>
                <field name="CommissionFlags" offset="208" type="CommissionFlags" optional="N" repeatable="N"/>
                <field name="CommissionCurrId" offset="212" type="string" optional="Y" repeatable="N"/>
                <field name="Commission" offset="220" type="double" optional="Y" repeatable="N"/>
                <field name="AgentComissionCurrId" offset="228" type="string" optional="Y" repeatable="N"/>
                <field name="AgentCommission" offset="236" type="double" optional="Y" repeatable="N"/>
                <field name="MinCommissionCurrId" offset="244" type="string" optional="Y" repeatable="N"/>
                <field name="Margin" offset="252" type="double" optional="Y" repeatable="N"/>
                <field name="Swap" offset="260" type="double" optional="Y" repeatable="N"/>
                <field name="PosId" offset="268" type="int64" optional="Y" repeatable="N"/>
                <field name="PosById" offset="276" type="int64" optional="Y" repeatable="N"/>
                <field name="PosOpened" offset="284" type="timestamp" optional="Y" repeatable="N"/>
                <field name="PosOpenPrice" offset="292" type="double" optional="Y" repeatable="N"/>
                <field name="PosQty" offset="300" type="double" optional="Y" repeatable="N"/>
                <field name="PosLastQty" offset="308" type="double" optional="Y" repeatable="N"/>
                <field name="PosLeavesQty" offset="316" type="double" optional="Y" repeatable="N"/>
                <field name="PosPrice" offset="324" type="double" optional="Y" repeatable="N"/>
                <field name="PosType" offset="332" type="PosType" optional="Y" repeatable="N"/>
                <field name="PosClosePrice" offset="336" type="double" optional="Y" repeatable="N"/>
                <field name="PosClosed" offset="344" type="timestamp" optional="Y" repeatable="N"/>
                <field name="ReqOpenPrice" offset="352" type="double" optional="Y" repeatable="N"/>
                <field name="ReqOpenQty" offset="360" type="double" optional="Y" repeatable="N"/>
                <field name="ReqClosePrice" offset="368" type="double" optional="Y" repeatable="N"/>
                <field name="ReqCloseQty" offset="376" type="double" optional="Y" repeatable="N"/>
                <field name="Balance" offset="384" type="Balance" optional="Y" repeatable="N"/>
                <field name="Asset1" offset="408" type="Asset" optional="Y" repeatable="N"/>
                <field name="Asset2" offset="432" type="Asset" optional="Y" repeatable="N"/>
                <field name="Conversions" offset="456" type="Conversion" optional="N" repeatable="Y"/>
            </fields>
        </group>
        <message name="TradeCaptureReport_1" id="10" superMessage="Response" size="24">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Time" offset="16" type="timestamp" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeUpdateReport" id="11" size="472">
            <fields>
                <field name="Trade" offset="8" type="Trade" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="TradeHistoryDirection" size="4">
            <members>
                <member name="Forward" value="0"/>
                <member name="Backward" value="1"/>
            </members>
        </enum>
        <message name="TradeDownloadRequest" id="12" superMessage="Request" size="37">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Direction" offset="16" type="TradeHistoryDirection" optional="N" repeatable="N"/>
                <field name="From" offset="20" type="timestamp" optional="Y" repeatable="N"/>
                <field name="To" offset="28" type="timestamp" optional="Y" repeatable="N"/>
                <field name="SkipCancel" offset="36" type="bool" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeDownloadBeginReport" id="13" superMessage="Response" size="20">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="TotalCount" offset="16" type="int32" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeDownloadReport" id="14" superMessage="Response" size="480">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Trade" offset="16" type="Trade" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeDownloadEndReport" id="15" superMessage="Response" size="16">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeDownloadCancelRequest" id="16" superMessage="Request" size="24">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="RequestId" offset="16" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeDownloadCancelReport" id="17" superMessage="Response" size="16">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="NotificationType" size="4">
            <members>
                <member name="ConfigUpdate" value="0"/>
            </members>
        </enum>
        <enum name="NotificationSeverity" size="4">
            <members>
                <member name="Info" value="0"/>
                <member name="Warning" value="1"/>
                <member name="Error" value="2"/>
            </members>
        </enum>
        <message name="Notification" id="18" size="32">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Type" offset="16" type="NotificationType" optional="N" repeatable="N"/>
                <field name="Severity" offset="20" type="NotificationSeverity" optional="N" repeatable="N"/>
                <field name="Text" offset="24" type="string" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <enum name="AccountHistoryDirection" size="4">
            <members>
                <member name="Forward" value="0"/>
                <member name="Backward" value="1"/>
            </members>
        </enum>
        <message name="AccountDownloadRequest" id="19" superMessage="Request" size="36">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Direction" offset="16" type="AccountHistoryDirection" optional="N" repeatable="N"/>
                <field name="From" offset="20" type="timestamp" optional="Y" repeatable="N"/>
                <field name="To" offset="28" type="timestamp" optional="Y" repeatable="N"/>
            </fields>
        </message>
        <message name="AccountDownloadBeginReport" id="20" superMessage="Response" size="20">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="TotalCount" offset="16" type="int32" optional="N" repeatable="N"/>
            </fields>
        </message>
        <enum name="AccountType" size="4">
            <members>
                <member name="Gross" value="0"/>
                <member name="Net" value="1"/>
                <member name="Cash" value="2"/>
            </members>
        </enum>
        <set name="AccountFlags" size="4">
            <members>
                <member name="Valid" value="0"/>
                <member name="Investor" value="1"/>
                <member name="Blocked" value="2"/>
            </members>
        </set>
        <group name="Account" size="124">
            <fields>
                <field name="Id" offset="0" type="int64" optional="N" repeatable="N"/>
                <field name="Type" offset="8" type="AccountType" optional="N" repeatable="N"/>
                <field name="TransactTime" offset="12" type="timestamp" optional="N" repeatable="N"/>
                <field name="Flags" offset="20" type="AccountFlags" optional="N" repeatable="N"/>
                <field name="Leverage" offset="24" type="int32" optional="N" repeatable="N"/>
                <field name="Margin" offset="28" type="double" optional="N" repeatable="N"/>
                <field name="MarginLevel" offset="36" type="double" optional="N" repeatable="N"/>
                <field name="Equity" offset="44" type="double" optional="N" repeatable="N"/>
                <field name="Profit" offset="52" type="double" optional="N" repeatable="N"/>
                <field name="Swap" offset="60" type="double" optional="N" repeatable="N"/>
                <field name="Commission" offset="68" type="double" optional="N" repeatable="N"/>
                <field name="AgentCommission" offset="76" type="double" optional="N" repeatable="N"/>
                <field name="Balance" offset="84" type="Balance" optional="Y" repeatable="N"/>
                <field name="Assets" offset="108" type="Asset" optional="N" repeatable="Y"/>
                <field name="Conversions" offset="116" type="Conversion" optional="N" repeatable="Y"/>
            </fields>
        </group>
        <message name="AccountDownloadReport" id="21" superMessage="Response" size="140">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="Account" offset="16" type="Account" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="AccountDownloadEndReport" id="22" superMessage="Response" size="16">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="AccountDownloadCancelRequest" id="23" superMessage="Request" size="24">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="RequestId" offset="16" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="AccountDownloadCancelReport" id="24" superMessage="Response" size="16">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeSubscribeRequest" id="25" superMessage="Request" size="25">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
                <field name="From" offset="16" type="timestamp" optional="N" repeatable="N"/>
                <field name="SkipCancel" offset="24" type="bool" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeSubscribeReport" id="26" superMessage="Response" size="16">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeUnsubscribeRequest" id="27" superMessage="Request" size="16">
            <fields>
                <field name="Id" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <message name="TradeUnsubscribeReport" id="28" superMessage="Response" size="16">
            <fields>
                <field name="RequestId" offset="8" type="string" optional="N" repeatable="N"/>
            </fields>
        </message>
        <processor name="Client" head="421_13">
            <subProcessors>
                <subProcessor name="ClientTwoFactorLogin"/>
                <subProcessor name="ClientRequest"/>
                <subProcessor name="ClientUpdate"/>
            </subProcessors>
            <states>
                <state label="421_13">
                    <operations>
                        <send name="LoginRequest" next="423_17">
                            <messages>
                                <message name="LoginRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="423_17">
                    <operations>
                        <recv next="427_25">
                            <messages>
                                <message name="LoginReport">
                                    <expression>
                                        <field name="TwoFactorLogin"/>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                        <recv name="LoginReport" next="455_13">
                            <messages>
                                <message name="LoginReport">
                                    <expression>
                                        <not>
                                            <field name="TwoFactorLogin"/>
                                        </not>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                        <recv name="LoginReject" next="421_13">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="LoginRequest"/>
                    </contexts>
                </state>
                <state label="427_25">
                    <operations>
                        <recv name="TwoFactorLoginRequest" next="429_29">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerRequest"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="LoginRequest"/>
                    </contexts>
                </state>
                <state label="429_29">
                    <operations>
                        <send name="TwoFactorLoginResponse" next="431_33">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ClientResponse"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                    </operations>
                    <contexts>
                        <context name="LoginRequest"/>
                    </contexts>
                </state>
                <state label="431_33">
                    <operations>
                        <recv name="TwoFactorLoginSuccess" next="455_13">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerSuccess"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                        <recv name="TwoFactorLoginReject" next="427_25">
                            <messages>
                                <message name="TwoFactorReject"/>
                            </messages>
                        </recv>
                        <recv name="TwoFactorLoginError" next="421_13">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerError"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="LoginRequest"/>
                        <context name="TwoFactorLoginResponse"/>
                    </contexts>
                </state>
                <state label="455_13">
                    <operations>
                        <send next="455_13">
                            <messages>
                                <message name="Request"/>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ClientResume"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                        <recv next="455_13">
                            <messages>
                                <message name="Response"/>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerResume"/>
                                        </equal>
                                    </expression>
                                </message>
                                <message name="TradeUpdateReport"/>
                                <message name="Notification"/>
                            </messages>
                        </recv>
                        <send name="Logout" next="465_17">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                        <recv name="Logout" next="421_13">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="465_17">
                    <operations>
                        <recv next="465_17">
                            <messages>
                                <message name="Response"/>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerResume"/>
                                        </equal>
                                    </expression>
                                </message>
                                <message name="TradeUpdateReport"/>
                                <message name="Notification"/>
                            </messages>
                        </recv>
                        <recv name="Logout" next="421_13">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="Logout"/>
                    </contexts>
                </state>
            </states>
        </processor>
        <processor name="ClientTwoFactorLogin" superProcessor="Client" head="488_13">
            <messages>
                <message name="TwoFactorLogin"/>
                    <expression>
                        <or>
                            <equal>
                                <field name="Reason"/>
                                <enumMember name="TwoFactorReason.ClientResume"/>
                            </equal>
                            <equal>
                                <field name="Reason"/>
                                <enumMember name="TwoFactorReason.ServerResume"/>
                            </equal>
                        </or>
                    </expression>
                </message>
            </messages>
            <states>
                <state label="488_13">
                    <operations>
                        <send name="TwoFactorLoginResume" next="490_17">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ClientResume"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="490_17">
                    <operations>
                        <recv name="TwoFactorLoginResume" next="488_13">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerResume"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TwoFactorLoginResume"/>
                    </contexts>
                </state>
            </states>
        </processor>
        <processor name="ClientRequest" type="string" superProcessor="Client" head="501_9">
            <fields>
                <field name="Request.Id"/>
                <field name="Response.RequestId"/>
            </fields>
            <states>
                <state label="501_9">
                    <operations>
                        <send name="TradeSubscribeRequest" next="503_13">
                            <messages>
                                <message name="TradeSubscribeRequest"/>
                            </messages>
                        </send>
                        <send name="TradeUnsubscribeRequest" next="510_13">
                            <messages>
                                <message name="TradeUnsubscribeRequest"/>
                            </messages>
                        </send>
                        <send name="TradeDownloadRequest" next="517_13">
                            <messages>
                                <message name="TradeDownloadRequest"/>
                            </messages>
                        </send>
                        <send name="TradeDownloadCancelRequest" next="532_13">
                            <messages>
                                <message name="TradeDownloadCancelRequest"/>
                            </messages>
                        </send>
                        <send name="AccountDownloadRequest" next="539_13">
                            <messages>
                                <message name="AccountDownloadRequest"/>
                            </messages>
                        </send>
                        <send name="AccountDownloadCancelRequest" next="554_13">
                            <messages>
                                <message name="AccountDownloadCancelRequest"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="503_13">
                    <operations>
                        <recv name="TradeSubscribeReport">
                            <messages>
                                <message name="TradeSubscribeReport"/>
                            </messages>
                        </recv>
                        <recv name="TradeSubscribeReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TradeSubscribeRequest"/>
                    </contexts>
                </state>
                <state label="510_13">
                    <operations>
                        <recv name="TradeUnsubscribeReport">
                            <messages>
                                <message name="TradeUnsubscribeReport"/>
                            </messages>
                        </recv>
                        <recv name="TradeUnsubscribeReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TradeUnsubscribeRequest"/>
                    </contexts>
                </state>
                <state label="517_13">
                    <operations>
                        <recv name="TradeDownloadBeginReport" next="519_17">
                            <messages>
                                <message name="TradeDownloadBeginReport"/>
                            </messages>
                        </recv>
                        <recv name="TradeDownloadReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TradeDownloadRequest"/>
                    </contexts>
                </state>
                <state label="519_17">
                    <operations>
                        <recv name="TradeDownloadReport" next="519_17">
                            <messages>
                                <message name="TradeDownloadReport"/>
                            </messages>
                        </recv>
                        <recv name="TradeDownloadEndReport">
                            <messages>
                                <message name="TradeDownloadEndReport"/>
                            </messages>
                        </recv>
                        <recv name="TradeDownloadReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TradeDownloadRequest"/>
                    </contexts>
                </state>
                <state label="532_13">
                    <operations>
                        <recv name="TradeDownloadCancelReport">
                            <messages>
                                <message name="TradeDownloadCancelReport"/>
                            </messages>
                        </recv>
                        <recv name="TradeDownloadCancelReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TradeDownloadCancelRequest"/>
                    </contexts>
                </state>
                <state label="539_13">
                    <operations>
                        <recv name="AccountDownloadBeginReport" next="541_17">
                            <messages>
                                <message name="AccountDownloadBeginReport"/>
                            </messages>
                        </recv>
                        <recv name="AccountDownloadReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="AccountDownloadRequest"/>
                    </contexts>
                </state>
                <state label="541_17">
                    <operations>
                        <recv name="AccountDownloadReport" next="541_17">
                            <messages>
                                <message name="AccountDownloadReport"/>
                            </messages>
                        </recv>
                        <recv name="AccountDownloadEndReport">
                            <messages>
                                <message name="AccountDownloadEndReport"/>
                            </messages>
                        </recv>
                        <recv name="AccountDownloadReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="AccountDownloadRequest"/>
                    </contexts>
                </state>
                <state label="554_13">
                    <operations>
                        <recv name="AccountDownloadCancelReport">
                            <messages>
                                <message name="AccountDownloadCancelReport"/>
                            </messages>
                        </recv>
                        <recv name="AccountDownloadCancelReject">
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="AccountDownloadCancelRequest"/>
                    </contexts>
                </state>
            </states>
        </processor>
        <processor name="ClientUpdate" superProcessor="Client" head="569_13">
            <messages>
                <message name="TradeUpdateReport"//>
                <message name="Notification"//>
            </messages>
            <states>
                <state label="569_13">
                    <operations>
                        <recv name="TradeUpdateReport" next="569_13">
                            <messages>
                                <message name="TradeUpdateReport"/>
                            </messages>
                        </recv>
                        <recv name="Notification" next="569_13">
                            <messages>
                                <message name="Notification"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
            </states>
        </processor>
        <processor name="Server" head="580_13">
            <subProcessors>
                <subProcessor name="ServerTwoFactorLogin"/>
                <subProcessor name="ServerRequest"/>
                <subProcessor name="ServerUpdate"/>
            </subProcessors>
            <states>
                <state label="580_13">
                    <operations>
                        <recv name="LoginRequest" next="582_17">
                            <messages>
                                <message name="LoginRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="582_17">
                    <operations>
                        <send next="586_25">
                            <messages>
                                <message name="LoginReport">
                                    <expression>
                                        <field name="TwoFactorLogin"/>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                        <send next="614_13">
                            <messages>
                                <message name="LoginReport">
                                    <expression>
                                        <not>
                                            <field name="TwoFactorLogin"/>
                                        </not>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                        <send next="580_13">
                            <messages>
                                <message name="LoginReject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="586_25">
                    <operations>
                        <send name="TwoFactorLoginRequest" next="588_29">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerRequest"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="588_29">
                    <operations>
                        <recv name="TwoFactorLoginResponse" next="590_33">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ClientResponse"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                    </operations>
                    <contexts>
                        <context name="TwoFactorLoginRequest"/>
                    </contexts>
                </state>
                <state label="590_33">
                    <operations>
                        <send next="614_13">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerSuccess"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                        <send next="586_25">
                            <messages>
                                <message name="TwoFactorReject"/>
                            </messages>
                        </send>
                        <send next="580_13">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerError"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                    </operations>
                    <contexts>
                        <context name="TwoFactorLoginRequest"/>
                    </contexts>
                </state>
                <state label="614_13">
                    <operations>
                        <recv next="614_13">
                            <messages>
                                <message name="Request"/>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ClientResume"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                        <send next="614_13">
                            <messages>
                                <message name="Response"/>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerResume"/>
                                        </equal>
                                    </expression>
                                </message>
                                <message name="TradeUpdateReport"/>
                                <message name="Notification"/>
                            </messages>
                        </send>
                        <recv name="Logout" next="624_17">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </recv>
                        <send next="580_13">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="624_17">
                    <operations>
                        <send next="624_17">
                            <messages>
                                <message name="Response"/>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerResume"/>
                                        </equal>
                                    </expression>
                                </message>
                                <message name="TradeUpdateReport"/>
                                <message name="Notification"/>
                            </messages>
                        </send>
                        <send next="580_13">
                            <messages>
                                <message name="Logout"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
        <processor name="ServerTwoFactorLogin" superProcessor="Server" head="647_13">
            <messages>
                <message name="TwoFactorLogin"/>
                    <expression>
                        <or>
                            <equal>
                                <field name="Reason"/>
                                <enumMember name="TwoFactorReason.ClientResume"/>
                            </equal>
                            <equal>
                                <field name="Reason"/>
                                <enumMember name="TwoFactorReason.ServerResume"/>
                            </equal>
                        </or>
                    </expression>
                </message>
            </messages>
            <states>
                <state label="647_13">
                    <operations>
                        <recv name="TwoFactorLoginResume" next="649_17">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ClientResume"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="649_17">
                    <operations>
                        <send next="647_13">
                            <messages>
                                <message name="TwoFactorLogin">
                                    <expression>
                                        <equal>
                                            <field name="Reason"/>
                                            <enumMember name="TwoFactorReason.ServerResume"/>
                                        </equal>
                                    </expression>
                                </message>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
        <processor name="ServerRequest" type="string" superProcessor="Server" head="660_9">
            <fields>
                <field name="Request.Id"/>
                <field name="Response.RequestId"/>
            </fields>
            <states>
                <state label="660_9">
                    <operations>
                        <recv name="TradeSubscribeRequest" next="662_13">
                            <messages>
                                <message name="TradeSubscribeRequest"/>
                            </messages>
                        </recv>
                        <recv name="TradeUnsubscribeRequest" next="669_13">
                            <messages>
                                <message name="TradeUnsubscribeRequest"/>
                            </messages>
                        </recv>
                        <recv name="TradeCaptureRequest_1" next="676_13">
                            <messages>
                                <message name="TradeCaptureRequest_1"/>
                            </messages>
                        </recv>
                        <recv name="TradeDownloadRequest" next="683_13">
                            <messages>
                                <message name="TradeDownloadRequest"/>
                            </messages>
                        </recv>
                        <recv name="TradeDownloadCancelRequest" next="698_13">
                            <messages>
                                <message name="TradeDownloadCancelRequest"/>
                            </messages>
                        </recv>
                        <recv name="AccountDownloadRequest" next="705_13">
                            <messages>
                                <message name="AccountDownloadRequest"/>
                            </messages>
                        </recv>
                        <recv name="AccountDownloadCancelRequest" next="720_13">
                            <messages>
                                <message name="AccountDownloadCancelRequest"/>
                            </messages>
                        </recv>
                    </operations>
                </state>
                <state label="662_13">
                    <operations>
                        <send>
                            <messages>
                                <message name="TradeSubscribeReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="669_13">
                    <operations>
                        <send>
                            <messages>
                                <message name="TradeUnsubscribeReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="676_13">
                    <operations>
                        <send>
                            <messages>
                                <message name="TradeCaptureReport_1"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="683_13">
                    <operations>
                        <send next="685_17">
                            <messages>
                                <message name="TradeDownloadBeginReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="685_17">
                    <operations>
                        <send next="685_17">
                            <messages>
                                <message name="TradeDownloadReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="TradeDownloadEndReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="698_13">
                    <operations>
                        <send>
                            <messages>
                                <message name="TradeDownloadCancelReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="705_13">
                    <operations>
                        <send next="707_17">
                            <messages>
                                <message name="AccountDownloadBeginReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="707_17">
                    <operations>
                        <send next="707_17">
                            <messages>
                                <message name="AccountDownloadReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="AccountDownloadEndReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
                <state label="720_13">
                    <operations>
                        <send>
                            <messages>
                                <message name="AccountDownloadCancelReport"/>
                            </messages>
                        </send>
                        <send>
                            <messages>
                                <message name="Reject"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
        <processor name="ServerUpdate" superProcessor="Server" head="735_13">
            <messages>
                <message name="TradeUpdateReport"//>
                <message name="Notification"//>
            </messages>
            <states>
                <state label="735_13">
                    <operations>
                        <send next="735_13">
                            <messages>
                                <message name="TradeUpdateReport"/>
                            </messages>
                        </send>
                        <send next="735_13">
                            <messages>
                                <message name="Notification"/>
                            </messages>
                        </send>
                    </operations>
                </state>
            </states>
        </processor>
    </members>
</protocol>
